# Tutoring-center-database-project
Проект представляет собой базу данных PostgreSQL кадрового учета. Основная цель — хранение и управление персональными данными сотрудников, как административный персонал, так и преподавателей, с возможностью детального описания их образования, квалификации и профильных предметов для различных возрастных групп учащихся. База данных спроектирована с учетом требований безопасности, изоляции данных и гибкости предоставления информации различным категориям пользователей: сотрудникам школы, родителям, учащимся, HR-специалистам, а также внешним сервисам системы (API).

## Технология: PostgreSQL 17.
## Установка
Использовать Query tool, запустить сначала ```USERS_DUMP.sql```, после ```DB_DUMP.sql```.

## ТЗ:
- "Онлайн школа оказывает услуги по проведению онлайн занятий в группах и индивидуальных.
Проект школы оказался успешным и быстро развивается, однако, информационная система школы, построенная как монолитный сервис, перестала справляться с возросшими нагрузками. Принято решение перевести информационную систему школы в микросервисную архитектуру.
Каждый микросервис будет иметь свою собственную базу данных.
Вам необходима разработать базу данных для описанного ниже сервиса, наполнить тестовыми данными, а также разработать и реализовать политику доступа к данным используя возможности PostgreSQL (роли, процедуры, представления, политики доступа к строкам (RLS) и т.д.).
Информационная система школы будет включать следующие сервис:

- Вариант 2. Учет сотрудников и преподавателей
Сервис представляет собой кадровый учет сотрудников. О сотрудниках необходимо хранить
личные данные (ФИО, дата рождения, адрес, контактные данные (телефоны, адреса
электронных почт, аккаунты в соц. сетях и т.д.), данные об образовании (каждый сотрудник может иметь несколько дипломов об образовании и повышении квалификации). Для преподавателей необходимо хранить информацию о предметах, которые они могут преподавать и для какой возрастной группы (начальная школа, средняя, старшие классы). Сервис должен предоставлять доступ к данным родителям, учащимся, сотрудникам и специалистам отдела кадров. Также сервис предоставляет информацию о преподавателях в другие сервисы. Причем каждая группа пользователей должна получать доступ только к
необходимой для их работы информации."

## ER-диаграмма системы:
<img width="1276" height="1392" alt="Untitled" src="https://github.com/user-attachments/assets/6cdbf6f4-96e8-4861-bddc-7c049092de44" />


## Описание БД

Ключевые таблицы: ``employees`` — основная таблица сотрудников с ФИО, датой рождения, полом, адресом проживания и контактными данными в формате JSONB (телефоны, email, соцсети); ``education`` — информация об образовании каждого сотрудника, включая учебные заведения, специальности, годы окончания и типы образования; ``school_programs`` — связь преподавателей с предметами и возрастными группами, а также данные о сертификатах и курсах повышения квалификации; справочники subjects и age_groups содержат нормализованные данные о предметах и возрастных категориях соответственно. Также присутствуют вспомогательные справочники ``education_types`` и ``qualifications`` для стандартизации типов образования и профессиональных квалификаций.

Для обеспечения безопасного и контролируемого доступа к данным реализован механизм управления правами Row Level Security (RLS), представлений и хранимых процедур. Для каждой категории пользователей определены соответствующие политики доступа: преподаватели могут видеть и редактировать только свои собственные записи в таблице employees, родители и учащиеся получают доступ только к публичной информации о действующих преподавателях (без личной, конфиденциальной) через специальные представления: ``public_teacher_profiles`` или ``teacher_search_by_subject``. HR-специалисты имеют полный доступ ко всем данным. Внешние сервисы (например, сервис расписания или бронирования) получают ограниченный объем информации через API-подобные представления через ``api_teachers_for_scheduling``.

Для автоматизации работы с данными реализованы триггеры и хранимые процедуры. При изменении записей в таблицах ``employees``, ``education`` или ``school_programs`` автоматически фиксируются события в таблице ``audit_log``. Процедура ``add_new_teacher`` позволяет добавлять нового преподавателя со всеми связанными данными. Рееализованы механизмы автоматической идентификации текущего пользователя по имени его PostgreSQL-аккаунта (например, ``teacher_ivan``) и сопоставления его с реальным сотрудником через таблицу ``teacher_user_mapping``.

База данных содержит тестовые данные, демонстрирующие работу всех компонентов: зарегистрированы несколько преподавателей с разным уровнем образования и набором предметов, указаны их контакты и соцсети, заданы сертификаты и программы обучения, также примеры HR-сотрудника и технической поддержки.






